<html class="x-admin-sm">  <head>    <meta charset="UTF-8">    <title>格主结账明细</title>    <meta name="renderer" content="webkit">    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <!--<meta name="viewport" content="width=device-width,tenant-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />-->    <link rel="stylesheet" href="../../css/font.css">    <link rel="stylesheet" href="../../css/xadmin.css">    <script type="text/javascript" src="../../js/jquery3.2.1.min.js"></script>    <script type="text/javascript" src="../../lib/layui/layui.js" charset="utf-8"></script>    <script type="text/javascript" src="../../js/xadmin.js"></script>    <script type="text/javascript" src="../../js/cookie.js"></script>    <script type="text/javascript" src="../../js/vue.min.js"></script>    <script type="text/javascript" src="../../js/axios.min.js"></script>    <!--<script type="text/javascript" src="../../js/vue-paginate.js"></script>-->    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->    <!--[if lt IE 9]>      <script src="../../js/html5.min.js"></script>      <script src="../../js/respond.min.js"></script>      <![endif]-->  </head>  <body>    <div class="x-nav" >      <span class="layui-breadcrumb">        <a href="">首页</a>        <a href="">业务查询</a>        <a>          <cite>格主结账明细</cite></a>      </span>      <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" href="javascript:location.replace(location.href);" title="刷新">        <i class="layui-icon" style="line-height:30px">ဂ</i></a>    </div>    <div class="x-body" id="tenant">      <div class="layui-row">        <div class=" layui-col-md12 x-so">          <input  class="layui-input" v-show="!flag" autocomplete="off" placeholder="开始日期" v-model="start" id="start">          <input  class="layui-input" v-show="!flag" autocomplete="off" placeholder="截止日期" v-model="end" id="end">          <input type="text" v-model="name"  v-show="flag" placeholder="请输入姓名" autocomplete="off" class="layui-input">          <input type="text" v-model="phone" v-show="flag" placeholder="请输入手机" autocomplete="off" class="layui-input">          <button class="layui-btn" v-show="flag"  @click="getAlltenants(0)" title="搜索"><i class="layui-icon" >&#xe615;</i></button>          <button class="layui-btn" v-show="!flag"  @click="getAllRecords(0)" title="搜索"><i class="layui-icon" >&#xe615;</i></button>          <button class="layui-btn" @click="reset()" title="重置"><i class="layui-icon" >&#xe669;</i></button>        </div>      </div>      <xblock>        <button class="layui-btn" v-show="!flag" @click="showtenantList(pageNumber)">格主列表</button>        <button class="layui-btn" v-show="flag" @click="showPayRecords(pageNumber)">结账明细</button>        <button class="layui-btn layui-btn-warm" v-show="personal">格主ID: {{tenant.id}}</button>        <button class="layui-btn layui-btn-warm" v-show="personal">格主姓名: {{tenant.name}}</button>        <span class="x-right" style="line-height:40px">共有数据：{{this.totalElements}} 条</span>      </xblock>      <table class="x-admin layui-table" v-show="flag">        <thead>          <tr>            <th>ID</th>            <th>姓名</th>            <th>手机</th>            <th>性别</th>            <th>总收入</th>            <th>账户余额</th>            <th>详情页</th>          </tr>        </thead>        <tbody id="tbody">          <tr v-for="items in tenants">            <td lay-sort="true">{{items.id}}</td>            <td>{{items.name}}</td>            <td>{{items.phone}}</td>            <td>{{items.sex}}</td>            <td>{{items.totalIncome.toFixed(2)}}</td>            <td>{{items.money.toFixed(2)}}</td>            <td class="td-manage">              <button class="layui-btn" @click="showPayRecord(items)">结账明细</button>            </td>          </tr>        </tbody>      </table>      <table class="x-admin layui-table" v-show="!flag">        <thead>        <tr>          <th>ID</th>          <th>格主ID</th>          <th>格主姓名</th>          <th>格主性别</th>          <th>格主手机</th>          <th>结账金额</th>          <th>结账日期</th>        </tr>        </thead>        <tbody >        <tr v-for="items in records">          <td>{{items.id}}</td>          <td>{{items.tenantId}}</td>          <td>{{items.tenantByTenantId.name}}</td>          <td>{{items.tenantByTenantId.sex}}</td>          <td>{{items.tenantByTenantId.phone}}</td>          <td>{{items.amount.toFixed(2)}}</td>          <td>{{items.createTime}}</td>        </tr>        </tbody>      </table>      <div class="page" v-show="paginate&&flag">        <a @click="getAlltenants(pageNumber-2)">&lt;&lt;</a>        <input  v-model="pageNumber" @change="getAlltenants(pageNumber-1)"/>/        <a>{{totalPages}}</a>        <a @click="getAlltenants(pageNumber)">&gt;&gt;</a>      </div>      <div class="page" v-show="paginate&&!flag">        <a @click="getAllRecords(pageNumber-2)">&lt;&lt;</a>        <input  v-model="pageNumber" @change="getAllRecords(pageNumber-1)"/>/        <a>{{totalPages}}</a>        <a @click="getAllRecords(pageNumber)">&gt;&gt;</a>      </div>    </div>    <script>        // import Paginate from '../../js/vue-paginate'        // Vue.component('paginate', VuePaginate);        const app = new Vue({            el: "#tenant",            data: {                // Note 'isActive' is left out and will not appear in the rendered table                tenants:[],                records:[],                pageNumber:1,                pageSize:10,                first:'',                last:'',                totalElements:0,                totalPages:1,                name:'',                start:'',                end:'',                phone:'',                tenant:{},                flag:true,                personal:false,                paginate:true,                pageCount:20,                marginPages:2,                rangePage:5,                initPage:0,            },            // components: {            //   'paginate':VuePaginate            // },            computed:{            },//自动加载            mounted() {                this.getAlltenants(0);                $('#all').html('<div class="layui-unselect layui-form-checkbox header " ' +                    'lay-skin="primary"><i class="layui-icon">&#xe605;</i></div>')            },            methods:{                getAlltenants(pages) {                    this.tenant={};                    if (pages>-1&&pages<this.totalPages||this.totalPages===0){                        axios.get(urlPrefix+'/tenants?token=' + token, {                            params: {                                'page':pages,                                'name':this.name,                                'start':this.start,                                'end':this.end,                                'phone':this.phone                            }                        }).then((response) => {                            var r = response.data.data;                            this.tenants=r.content;                            this.pageNumber=r.number+1;                            this.first=r.first;                            this.last=r.last;                            this.totalElements=r.totalElements;                            this.totalPages=r.totalPages;                            // alert(JSON.stringify(response.data.data))'                            if (this.totalElements<=10){                                this.paginate = false;                            }                        }).catch((err) => {                            errHandler(err)                        });                    }else if (pages<0&&!(this.first&&this.last)){                        layer.msg("已经是首页",{icon:0,time:1000});                    } else{                        if (!(this.first&&this.last)) {                            layer.msg("已经是尾页",{icon:0,time:1000});                        }                    }                },                getAllRecords(pages) {                    if (pages>-1&&pages<this.totalPages||this.totalPages===0){                        this.pageNumber =pages;                        axios.get(urlPrefix+'/payRecords/tenant?token=' + token, {                            params: {                                'page':pages,                                'id':this.tenant.id,                                'start':this.start,                                'end':this.end,                            }                        }).then((response) => {                            var r = response.data.data;                            this.records=r.content;                            this.pageNumber=r.number+1;                            this.first=r.first;                            this.last=r.last;                            this.totalElements=r.totalElements;                            this.totalPages=r.totalPages;                            // alert(JSON.stringify(response.data.data))'                            if (this.totalElements<=10){                                this.paginate = false;                            }                        }).catch((err) => {                            errHandler(err)                        });                    }else if (pages<0&&!(this.first&&this.last)){                        layer.msg("已经是首页",{icon:0,time:1000});                    } else{                        if (!(this.first&&this.last)) {                            layer.msg("已经是尾页",{icon:0,time:1000});                        }                    }                },                reset(){                        this.name='';                        this.start='';                        this.end='';                        this.phone='';                }                ,                showtenantList(){                    this.flag = true;                    this.personal=false;                    this.getAlltenants(0);                },                showPayRecords(){                    this.flag = false;                    this.personal=false;                    this.getAllRecords(0);                },                showPayRecord(tenant){                    this.tenant=tenant;                    this.flag = false;                    this.personal=true;                    this.getAllRecords(0);                }        }        });      layui.use('laydate', function(){        var laydate = layui.laydate;        //执行一个laydate实例        laydate.render({            elem: '#start', //指定元素            format:'yyyy-MM-dd',            done:(value)=>{                app.start = value;            }        });        //执行一个laydate实例        laydate.render({            elem: '#end', //指定元素            format:'yyyy-MM-dd',            done:(value)=>{                app.end = value;            }        });      });    </script>  </body></html>